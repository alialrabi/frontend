<!--
  Generated template for the UserOrdersPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>

    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>

    <ion-title>{{ 'USER_ORDERS' | translate }}</ion-title>
    <ion-buttons end class="btn-style">
      <button ion-button (click)="add()" *ngIf="userType=='User'">
        <ion-icon name="add"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>

</ion-header>


<ion-content class="auth-page-captain">

    <ion-grid style="width: 100%" *ngIf="userType=='Admin'">
        <ion-row>
          <ion-col style="padding: 0px" col-4>
            <button ion-button block tappable [ngClass] ="{'tap-selected': myVar == 'not assigned', 'tap-notselected': myVar != 'not assigned'}" (click)="getUserOrders('not assigned')">
              <!-- <ion-icon name="close" item-start></ion-icon> -->
              {{ 'NOT_ASSIGNED' | translate }}
            </button>
          </ion-col>
          <ion-col style="padding: 0px" col-4>
            <button ion-button  block tappable [ngClass] ="{'tap-selected': myVar == 'assigned', 'tap-notselected': myVar != 'assigned'}" (click)="getUserOrders('assigned')">
                <!-- <ion-icon name="stats" item-start></ion-icon> -->
                {{ 'ASSIGNED' | translate }}
            </button>
          </ion-col>
          <ion-col style="padding: 0px" col-4>
            <button ion-button block tappable [ngClass] = "{'tap-selected': myVar == 'delivered', 'tap-notselected': myVar != 'delivered'}" (click)="getUserOrders('delivered')">
                <!-- <ion-icon name="checkmark" item-start></ion-icon> -->
                {{ 'DELIVERED' | translate }}
            </button>
          </ion-col>
        </ion-row>

        
      </ion-grid>
      <ion-grid style="width: 100%" *ngIf="userType=='Captain'">
        <ion-row>
          
          <ion-col style="padding: 0px" col-6>
            <button ion-button  block tappable [ngClass] ="{'tap-selected': myVar == 'assigned', 'tap-notselected': myVar != 'assigned'}" (click)="getUserOrders('assigned')">
                <!-- <ion-icon name="stats" item-start></ion-icon> -->
                {{ 'ASSIGNED' | translate }}
            </button>
          </ion-col>
          <ion-col style="padding: 0px" col-6>
            <button ion-button block tappable [ngClass] = "{'tap-selected': myVar == 'delivered', 'tap-notselected': myVar != 'delivered'}" (click)="getUserOrders('delivered')">
                <!-- <ion-icon name="checkmark" item-start></ion-icon> -->
                {{ 'DELIVERED' | translate }}
            </button>
          </ion-col>
        </ion-row>

        
      </ion-grid>


      <div text-center *ngIf="ordersList.length == 0">
          <ion-grid>
            <ion-row>
              <ion-col>
                <img src="../../assets/img/sad.png" class="not-found-img">
              </ion-col>
            </ion-row>
            <ion-row>
              <ion-col>
      
                <h3 class="not-found-text"> {{ 'EMPTY_LIST' | translate }}</h3>
              </ion-col>
            </ion-row>
          </ion-grid>
      
        </div>
  
 


  <ion-list style="padding-top: 15px;">


    <ion-item class="item-background" *ngFor="let order of ordersList.slice().reverse()">
      <ion-grid>
        <ion-row>
          <ion-col class="img-col">
            <img class="circle-pic" src="../../assets/img/person.png" />
          </ion-col>

          <ion-col >

            <div class="account-info info-div">
              <p>
                Name : {{order.name}}
              </p>
              <p>
                From : {{order.fromAddress}}
              </p>
              <p>
                To : {{order.street}} <br/>  <li style="margin-left: 22px">, {{order.addressCity}} , {{order.country}}</li>
              </p>
              <p>
                Orders :
              </p>
              <div *ngFor="let item of viewOrder(order.orders)">
                <p style="margin-left: 15px;">
                  {{item.index}}. {{item.name}}
                </p>
              </div>
            </div>
          </ion-col>
        </ion-row>
      
      <ion-row>
        <ion-col col-6>
      <ion-buttons end class="btn-style" style="width: 100%" *ngIf="myVar != 'delivered' && userType=='Admin'">
        <button ion-button style="width: 100%" (click)="assingCaptain(order)">
          {{ 'ASSIGN_CAPTAIN' | translate }}
          </button>
      </ion-buttons>
      
      <ion-buttons end class="btn-style" style="width: 100%" *ngIf="myVar == 'assigned' && userType=='Captain'">
        <button ion-button style="width: 100%" (click)="finish(order)">
          {{ 'DELIVER' | translate }}
        </button>
      </ion-buttons>
    </ion-col>
    <ion-col col-6>
      <ion-buttons end class="btn-style" *ngIf="myVar != 'delivered' && (userType=='Captain' || userType=='Admin')">
        <button ion-button (click)="viewLocation(order)">
          {{ 'VIEW_LOCATION' | translate }}
        </button>
      </ion-buttons>
      </ion-col>
      </ion-row>

    </ion-grid>

    </ion-item>



  </ion-list>
